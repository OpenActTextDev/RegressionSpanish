<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Edward (Jed) Frees, University of Wisconsin - Madison">
<meta name="author" content="Andrés Villegas Ramirez, University of New South Wales">
<meta name="dcterms.date" content="2025-04-16">

<title>Foundations of Statistical and Machine Learning for Actuaries</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Course2025Resources_files/libs/clipboard/clipboard.min.js"></script>
<script src="Course2025Resources_files/libs/quarto-html/quarto.js"></script>
<script src="Course2025Resources_files/libs/quarto-html/popper.min.js"></script>
<script src="Course2025Resources_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Course2025Resources_files/libs/quarto-html/anchor.min.js"></script>
<link href="Course2025Resources_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Course2025Resources_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Course2025Resources_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Course2025Resources_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Course2025Resources_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="Course2025Resources_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="Course2025Resources_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<!-- Mathjax -->

<script type="text/x-mathjax-config">

		MathJax.Hub.Config({

			extensions: ['tex2jax.js'],

			jax: ['input/TeX', 'output/HTML-CSS'],

			tex2jax: {

				inlineMath: [ ['$','$'], ['\\(','\\)'] ],

				displayMath: [ ['$$','$$'], ['\\[','\\]'] ],

				processEscapes: true

			},

			'HTML-CSS': { availableFonts: ['TeX'] }

		});

</script>



<!-- The following code is for the quizzes -->

<script src="https://surveyjs.azureedge.net/1.0.50/survey.jquery.js"></script>

<link href="https://surveyjs.azureedge.net/1.0.50/survey.css" type="text/css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.6.4/showdown.min.js"></script>  



<script>

function markdownConverterEWF() {  

//Create showdown markdown converter

var converter = new showdown.Converter();

converter.setOption('ghCompatibleHeaderId', true);

survey

    .onTextMarkdown

    .add(function (survey, options) {

        //convert the mardown text to html

        var str = converter.makeHtml(options.text);

        //remove root paragraphs <p></p>

        str = str.substring(3);

        str = str.substring(0, str.length - 4);

        //set html

        options.html = str;

         MathJax.Hub.Queue(['Typeset',MathJax.Hub, 'options']);

    });  

};

// Quiz Header info

const jsonHeader = { 

    showProgressBar: "bottom",

    showTimerPanel: "none",

    maxTimeToFinishPage: 10000,

    maxTimeToFinish: 25000,

    firstPageIsStarted: true,

    startSurveyText: "Start Quiz" //,

//    title: "Does This Make Sense?"

}

// One and Two question quizzes

function jsonSummary1EWF(json) {  

let jsonEnd1 = { 

completedHtml: 

json["pages"][1]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][1]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][1]["questions"][0]["correctAnswer"]

};  

return jsonEnd1;

};





function jsonSummary2EWF(json) {  

let jsonEnd2 = { 

completedHtml: 

json["pages"][1]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][1]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][1]["questions"][0]["correctAnswer"]

+"<br>"+

json["pages"][2]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][2]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][2]["questions"][0]["correctAnswer"]

};  

return jsonEnd2;

};



// Three, four, and five question quizzes

function jsonSummary3EWF(json) {  

let jsonEnd3 = { 

completedHtml: 

json["pages"][1]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][1]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][1]["questions"][0]["correctAnswer"]

+"<br>"+

json["pages"][2]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][2]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][2]["questions"][0]["correctAnswer"]

+"<br>"+

json["pages"][3]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][3]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][3]["questions"][0]["correctAnswer"]

};  

return jsonEnd3;

};



function jsonSummary4EWF(json) {  

jsonEnd4 = jsonSummary3EWF(json);

jsonEnd4.completedHtml = jsonEnd4.completedHtml +  

"<br>"+

json["pages"][4]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][4]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][4]["questions"][0]["correctAnswer"]

;  

return jsonEnd4;

};



function jsonSummary5EWF(json) {  

jsonEnd5 = jsonSummary4EWF(json);

jsonEnd5.completedHtml = jsonEnd5.completedHtml +  

"<br>"+

json["pages"][5]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][5]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][5]["questions"][0]["correctAnswer"]

;  

return jsonEnd5;

};



function jsonSummary6EWF(json) {  

jsonEnd6 = jsonSummary5EWF(json);

jsonEnd6.completedHtml = jsonEnd6.completedHtml +  

"<br>"+

json["pages"][6]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][6]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][6]["questions"][0]["correctAnswer"]

;  

return jsonEnd6;

};



function jsonSummary7EWF(json) {  

jsonEnd7 = jsonSummary6EWF(json);

jsonEnd7.completedHtml = jsonEnd7.completedHtml +  

"<br>"+

json["pages"][7]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][7]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][7]["questions"][0]["correctAnswer"]

;  

return jsonEnd7;

};



function jsonSummary8EWF(json) {  

jsonEnd8 = jsonSummary7EWF(json);

jsonEnd8.completedHtml = jsonEnd8.completedHtml +  

"<br>"+

json["pages"][8]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][8]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][8]["questions"][0]["correctAnswer"]

;  

return jsonEnd8;

};



function jsonSummary9EWF(json) {  

jsonEnd9 = jsonSummary8EWF(json);

jsonEnd9.completedHtml = jsonEnd9.completedHtml +  

"<br>"+

json["pages"][9]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][9]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][9]["questions"][0]["correctAnswer"]

;  

return jsonEnd9;

};





function jsonSummary10EWF(json) {  

jsonEnd10 = jsonSummary9EWF(json);

jsonEnd10.completedHtml = jsonEnd10.completedHtml +  

"<br>"+

json["pages"][10]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][10]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][10]["questions"][0]["correctAnswer"]

;  

return jsonEnd10;

};





function jsonSummary11EWF(json) {  

jsonEnd11 = jsonSummary10EWF(json);

jsonEnd11.completedHtml = jsonEnd11.completedHtml +  

"<br>"+

json["pages"][11]["questions"][0]["name"]+ "<br>"+

"<i>Question: </i>"+json["pages"][11]["questions"][0]["title"]+"<br>"+

"<i>Answer: </i>"+json["pages"][11]["questions"][0]["correctAnswer"]

;  

return jsonEnd11;

};







</script>  

<!-- This completes the code for the quizzes -->





<!-- Various toggle functions used throughout --> 

<script language="javascript">

function toggle(id1,id2) {

	var ele = document.getElementById(id1); var text = document.getElementById(id2);

	if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Solution";}

		else {ele.style.display = "block"; text.innerHTML = "Hide Solution";}}

function togglecode(id1,id2) {

   var ele = document.getElementById(id1); var text = document.getElementById(id2);

   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show R Code";}

      else {ele.style.display = "block"; text.innerHTML = "Hide R Code";}}

function toggleEX(id1,id2) {

   var ele = document.getElementById(id1); var text = document.getElementById(id2);

   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Example";}

      else {ele.style.display = "block"; text.innerHTML = "Hide Example";}}

function toggleTheory(id1,id2) {

   var ele = document.getElementById(id1); var text = document.getElementById(id2);

   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Theory";}

      else {ele.style.display = "block"; text.innerHTML = "Hide Theory";}}

function toggleQuiz(id1,id2) {

   var ele = document.getElementById(id1); var text = document.getElementById(id2);

   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Quiz Solution";}

      else {ele.style.display = "block"; text.innerHTML = "Hide Quiz Solution";}}      

</script>



<!-- A few functions for revealing definitions -->

<script language="javascript">

<!--   $( function() {

    $("#tabs").tabs();

  } ); -->



$(document).ready(function(){

    $('[data-toggle="tooltip"]').tooltip();

});



$(document).ready(function(){

    $('[data-toggle="popover"]').popover(); 

});

</script>



<script language="javascript">

function openTab(evt, tabName) {

    var i, tabcontent, tablinks;

    tabcontent = document.getElementsByClassName("tabcontent");

    for (i = 0; i < tabcontent.length; i++) {

        tabcontent[i].style.display = "none";

    }

    tablinks = document.getElementsByClassName("tablinks");

    for (i = 0; i < tablinks.length; i++) {

        tablinks[i].className = tablinks[i].className.replace(" active", "");

    }

    document.getElementById(tabName).style.display = "block";

    evt.currentTarget.className += " active";

}



// Get the element with id="defaultOpen" and click on it

document.getElementById("defaultOpen").click();

</script>





<!-- Global site tag (gtag.js) - Google Analytics -->

<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125587869-1"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'UA-125587869-1');

</script>


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Foundations of Statistical and Machine Learning for Actuaries</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Edward (Jed) Frees, University of Wisconsin - Madison </p>
             <p>Andrés Villegas Ramirez, University of New South Wales </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">16 April 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong>Course Overview.</strong> This short course introduces statistical and machine learning with an emphasis on actuarial applications. Our approach stems from the fact that many modern machine learning tools can be interpreted through the lense of statistical principles, including classical regression techniques. Beginning with an overview of the statistical foundations, we show how to develop models based on “learning” from the data. We emphasize classical techniques widely used in actuarial applications such as those based on generalized linear models. This development of the foundation naturally leads to a modern approach towards statistical analysis known as statistical learning. For this approach, we describe techniques such as those based on boosting and tree-based methods, including random forests.</p>
<p>In contrast to statistical learning, machine learning only uses algorithms that can learn from the data and do not employ an underpinning probabilistic framework. Due to their popularity and widespread use, we provide an overview with an emphasis on actuarial applications. Our main focus is on neural networks and the “deep learning” associated with many layers of a network. Without the need to develop reasoning based on probabilistic models, the machine learning community has developed approaches to handle a broad set of problems including those from computer vision, text recognition, and natural language processing; we demonstrate these applications in this course.</p>
<p>This course will provide participants with a guided tour of the statistical and machine learning landscapes. Our goals are to:</p>
<ol type="1">
<li>give participants a deep understanding of what this set of tools can achieve in actuarial contexts, and</li>
<li>provide a springboard for participants that will allow them to develop additional expertise using machine learning approaches.</li>
</ol>
<p><strong>Course Format.</strong> The format of the course will consist of alternating blocks between presentations of the underlying principles and practical applications. In a typical block, the instructor will spend 45 minutes reviewing the insurance motivation and key mathematical underpinnings. This will be followed by a 45 minute block of time in which participants will actively explore a selected case study. Thus, it is anticipated that participants will bring a laptop.</p>
<p>For the foundations, the statistical learning component, and many of the case studies, we will utilize the statistical package ‘R’. This package is written by statisticians and its approach is tied directly to statistical applications. Participants with some familiarity with ‘R’ will benefit most from the course. For the machine learning components, we provide code from the general programming language ‘python’. We do not assume prior knowledge of python but will provide code so that participants can calibrate machine learning models using case studies. One of the benefits of the course is to expose participants to the power of python.</p>
<p><strong>Target Audience</strong>: Practicing actuaries, students, and educators interested in exposure to the foundations of insurance analytics.</p>
<section id="short-course-brief-outline" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Short Course Brief Outline</h1>
<ul>
<li>Day 1 - Foundations and Statistical Learning</li>
<li>Day 2 - Statistical and Machine Learning
<ul>
<li>Lecture on Ethical Aspects of AI from Dr.&nbsp;Fei Huang</li>
</ul></li>
<li>Day 3 - More on Machine Learning and How it Affects Actuarial Practice
<ul>
<li>Lecture on AI applications in insurance context from Prof.&nbsp;Dani Bauer</li>
</ul></li>
</ul>
<h5 style="text-align: center;" class="anchored" data-anchor-id="short-course-brief-outline">
<a id="displayTheory.Section4122.Hide" href="javascript:toggleTheory('toggleTheory.Section4122.Hide','displayTheory.Section4122.Hide');"><i><strong>A More Detailed Plan</strong></i></a>
</h5>
<div id="toggleTheory.Section4122.Hide" style="display: none">
<ul>
<li>Let us assume that each two hour block consists of 50 minutes of lecture, with 40 minutes interactive work and a 30 minute break.</li>
<li>So, four blocks per day, with three days in total</li>
</ul>
<div class="cell" data-layout-align="center">
<table class="lightable-classic table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption><strong>Detailed Schedule</strong></caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold;">Day and Time</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold;">Presenter</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold;">Topics</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold;">Notebook and Data Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;">Monday Morning</td>
<td style="text-align: center;">Jed</td>
<td style="text-align: left; width: 6.5cm;">Welcome and Foundations<br>
Hello to Google Colab</td>
<td style="text-align: center; width: 6.5cm;">None</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 3.5cm;"></td>
<td style="text-align: center;">Jed</td>
<td style="text-align: left; width: 6.5cm;">Logistic Regression and Generalized Linear Models</td>
<td style="text-align: center; width: 6.5cm;">LogisticGLM.ipynb<br>
<a href="https://openacttextdev.github.io/RegressionSpanish/index.html">Health Expenditures</a></td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;">Monday Afternoon</td>
<td style="text-align: center;">Andrés</td>
<td style="text-align: left; width: 6.5cm;">Regularization</td>
<td style="text-align: center; width: 6.5cm;"><a href="https://www.kaggle.com/datasets/harlfoxem/housesalesprediction">Seattle House Sales</a></td>
</tr>
<tr class="even">
<td style="text-align: center; width: 3.5cm;"></td>
<td style="text-align: center;">Andrés</td>
<td style="text-align: left; width: 6.5cm;">Resampling, Cross-Validation</td>
<td style="text-align: center; width: 6.5cm;"><a href="https://discover.data.vic.gov.au/dataset/victoria-road-crash-data">Victoria road crash data</a></td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;">Tuesday Morning</td>
<td style="text-align: center;">Andrés</td>
<td style="text-align: left; width: 6.5cm;">Classification</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="even">
<td style="text-align: center; width: 3.5cm;"></td>
<td style="text-align: center;">Andrés</td>
<td style="text-align: left; width: 6.5cm;">Trees, Boosting, Bagging</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;">Tuesday Afternoon</td>
<td style="text-align: center;">Jed</td>
<td style="text-align: left; width: 6.5cm;">Neural Networks</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="even">
<td style="text-align: center; width: 3.5cm;"></td>
<td style="text-align: center;">Jed</td>
<td style="text-align: left; width: 6.5cm;">Graphic Data Neural Networks</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;">Tuesday 4 pm</td>
<td style="text-align: center;">Fei</td>
<td style="text-align: left; width: 6.5cm;">Ethics - Fei Huang</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="even">
<td style="text-align: center; width: 3.5cm;">Wednesday Morning</td>
<td style="text-align: center;">Jed</td>
<td style="text-align: left; width: 6.5cm;">Recurrent Neural Networks</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;"></td>
<td style="text-align: center;">Jed</td>
<td style="text-align: left; width: 6.5cm;">Artificial Intelligence and ChatGPT</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="even">
<td style="text-align: center; width: 3.5cm;">Wednesday After Lunch</td>
<td style="text-align: center;">Dani</td>
<td style="text-align: left; width: 6.5cm;">Dani Bauer Insights</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 3.5cm;">Wednesday Afternoon</td>
<td style="text-align: center;">Andrés</td>
<td style="text-align: left; width: 6.5cm;">Non-Supervised Learning and Applications</td>
<td style="text-align: center; width: 6.5cm;"></td>
</tr>
</tbody>
</table>


</div>
<p><br></p>
<ul>
<li>Day 1 - <em>Foundations and Statistical Learning</em>
<ul>
<li>For the foundations, we can draw from Jed’s Bogotá short course as a base</li>
<li>For statistical learning, we can draw from the course of Andrés given in Africa as a base. We also have the James et al book for this. In addition, we have Peng Shi and UNSW courses for sample code and examples.</li>
</ul></li>
<li>Day 2 - <em>Statistical and Machine Learning</em>
<ul>
<li>For machine learning, we can rely upon the Géron (2023) book. We also have the Dani Bauer and UNSW courses for sample code and examples.</li>
</ul></li>
<li>Day 3 - <em>More on Machine Learning and How it Affects Actuarial Practice</em>
<ul>
<li>Use the IFoA: Actuaries Analytical Cookbook, Actuarial Data Science tutorials, and Peng Shi course to develop a structure. (Actually, we have too many publicly available examples.)</li>
</ul></li>
</ul>
</div>
</section>
<section id="data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data</h1>
<p>For this short course, you will find links to the data embedded in our notebooks (that you will retrieve on the fly). So, you will not need to download data in advance for this course.</p>
<p>However, should you be interested in experimenting further, here are some helpful sources of data:</p>
<ul>
<li><a href="https://github.com/OpenActTextDev/ActuarialRegression/tree/main/CSVData">Short Course Repo</a> - this is the Github repository where we will store data for the short course.
<ul>
<li>This repo contains data from the <a href="https://openacttextdev.github.io/RegressionSpanish/index.html">Modelado de Regresión con Aplicaciones Actuariales y Financieras</a>. You may also download these datasets from the <a href="https://instruction.bus.wisc.edu/jfrees/jfreesbooks/Regression%20Modeling/BookWebDec2010/data.html">Frees Regression Book Data Site</a>. Here, you will also find additional documentation regarding variable definitions.</li>
</ul></li>
<li><a href="https://openacttexts.github.io/LDAVer2/DataResources.html#other-data-sources">Loss Data Analytics List of Other Data Resources</a> - in this open actuarial textbook, many interesting datasets are described, including the Kaggle competitions datasets.</li>
<li><a href="https://instruction.bus.wisc.edu/jfrees/jfreesbooks/PredictiveModelingVol1/index.htm">Predictive Modeling in Actuarial Science</a> These are some other data sets, with R code, useful for regression applications.</li>
</ul>
</section>
<section id="short-course-resources" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Short Course Resources</h1>
<section id="other-actuarial-courses" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="other-actuarial-courses"><span class="header-section-number">3.1</span> Other actuarial courses</h2>
<ul>
<li>Madison
<ul>
<li><a href="https://openacttextdev.github.io/RegressionSpanish/ShortCourseOrganization.html">Frees Bogotá Foundations Short Course</a></li>
<li><a href="https://openacttextdev.github.io/RegressionSpanish/index.html">Frees Regression Book in Spanish</a></li>
<li><a href="https://github.com/danielbauer1979/MSDIA_PredictiveModelingAndMachineLearning">Dani Bauer’s Teaching Github Repo</a></li>
<li><a href="https://github.com/danielbauer1979/CAS_PredMod">Dani Bauer’s CAS Tutorial 2022 on Github</a></li>
</ul></li>
<li>Australia
<ul>
<li><a href="https://github.com/amvillegas/afric">Villegas Ramirez 2023 AFRIC Statistical learning workshop, Github Repo</a></li>
<li><a href="https://unsw-risk-and-actuarial-studies.github.io/ACTL3142/">UNSW; Statistical Machine Learning for Risk and Actuarial Applications</a>. This course relies heavily on James et al.; see below.</li>
<li><a href="https://laub.au/DeepLearningForActuaries/">UNSW: Artificial Intelligence and Deep Learning Models for Actuarial Applications</a>
<ul>
<li><a href="https://github.com/Pat-Laub/DeepLearningForActuaries">Course GitHub Resources</a></li>
<li><a href="https://www.actuaries.digital/2023/05/18/teaching-ai-to-unsw-actuarial-students/">Course Motivation</a></li>
</ul></li>
<li><a href="https://unsw-risk-and-actuarial-studies.github.io/">UNSW Actuarial Software Directory</a><br>
</li>
</ul></li>
<li>Switzerland
<ul>
<li><a href="https://github.com/actuarial-data-science/CourseDeepLearningWithActuarialApplications">Github Repo For Actuarial Deep Learning Short Course</a></li>
</ul></li>
<li>Other
<ul>
<li><a href="https://github.com/xiangshiyin/machine-learning-for-actuarial-science">Machine Learning for Actuarial Science - Github Repo</a></li>
<li>This course and UNSW course rely heavily on <a href="https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/">Géron, A. (2022). Hands-on machine learning with Scikit-Learn, Keras, and TensorFlow (3rd ed.). O’Reilly Media.</a>.
<ul>
<li><a href="https://github.com/ageron/handson-ml3">Free Github Code for Géron</a></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="other-actuarial-resources" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="other-actuarial-resources"><span class="header-section-number">3.2</span> Other actuarial resources</h2>
<ul>
<li>UK
<ul>
<li><a href="https://actuariesinstitute.github.io/cookbook/docs/index.html">IFoA: Actuaries Analytical Cookbook</a></li>
<li><a href="https://institute-and-faculty-of-actuaries.github.io/mlr-blog/workstreams/foundations/">Getting Started in Machine Learning</a></li>
</ul></li>
<li>Switzerland
<ul>
<li><a href="https://actuarialdatascience.org/">Actuarial Data Science</a></li>
<li><a href="https://github.com/actuarial-data-science/Tutorials">Github Repo</a><br>
</li>
<li><a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=5162304">AI Tools for Actuaries (March 3 2025), Mario Wüthrich et al.</a><br>
</li>
<li><a href="https://link-springer-com.virtual.anu.edu.au/book/10.1007/978-3-031-12409-9">Statistical Foundations of Actuarial Learning and its Applications</a></li>
</ul></li>
<li>Rest of Europe
<ul>
<li><a href="https://actuary.eu/wp-content/uploads/2024/09/2024-09-16_CPD-in-DS-FINAL.pdf">CPD in Data Science</a></li>
<li>Effective Statistical Learning Methods for Actuaries (2019/20), by Michel Denuit, Donatien Hainaut , Julien Trufin (<strong>not free</strong>)
<ul>
<li><a href="https://link.springer.com/book/10.1007/978-3-030-25820-7">Part 1: GLMs and Extensions</a></li>
<li><a href="https://link.springer.com/book/10.1007/978-3-030-57556-4">Part II: Tree-Based Methods and Extensions</a></li>
<li><a href="https://www.amazon.com/Effective-Statistical-Learning-Methods-Actuaries-ebook/dp/B07ZVK2H43">Part III: Neural Networks and Extensions</a></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="thought-provoking-articles-and-commentaries" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="thought-provoking-articles-and-commentaries"><span class="header-section-number">3.3</span> Thought Provoking Articles and Commentaries</h2>
<ul>
<li><a href="https://www.annualreviews.org/content/journals/10.1146/annurev-statistics-040120-030244">Recent Challenges in Actuarial Science</a>, by Embrechts and Wütrich</li>
<li><a href="https://actuary.eu/wp-content/uploads/2024/01/What-should-an-actuary-know-about-Artificial-Intelligence.pdf">What an actuary should know about artificial intelligence</a></li>
<li><a href="https://www.wolfram.com/language/introduction-machine-learning/">Wolfram Overview of ML</a>
<ul>
<li><a href="https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/">What Is ChatGPT Doing - and Why Does It Work?</a></li>
</ul></li>
</ul>
</section>
<section id="other-courses-some-with-books" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="other-courses-some-with-books"><span class="header-section-number">3.4</span> Other Courses (Some with Books)</h2>
<section id="statistical-learning" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="statistical-learning"><span class="header-section-number">3.4.1</span> Statistical Learning</h3>
<ul>
<li><a href="https://www.statlearning.com/">James et al.&nbsp;(2021), An Introduction to Statistical Learning with Applications in R</a></li>
<li><a href="https://www.statlearning.com/">James et al.&nbsp;(2023), An Introduction to Statistical Learning with Applications in Python</a>
<ul>
<li><a href="https://www.edx.org/learn/python/stanford-university-statistical-learning-with-python">Stanford Statistical Learning</a></li>
<li><a href="https://www.youtube.com/watch?v=yLEx1FnYyOo&amp;list=PLoROMvodv4rNHU1-iPeDRH-J0cL-CrIda&amp;index=11">YouTube</a></li>
</ul></li>
</ul>
</section>
<section id="machine-learning-and-ai" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="machine-learning-and-ai"><span class="header-section-number">3.4.2</span> Machine Learning and AI</h3>
<ul>
<li><a href="https://www.coursera.org/learn/machine-learning">Coursera - Machine Learning by Andrew Ng</a></li>
<li><a href="https://atcold.github.io/NYU-DLSP21/">Lecun ML Course</a></li>
<li><a href="https://lightning.ai/courses/deep-learning-fundamentals/">Build a Large Language Model (From Scratch)</a>
<ul>
<li><a href="https://sebastianraschka.com/teaching/">Raschka Teaching Site</a></li>
</ul></li>
<li><a href="https://archive.org/details/python-machine-learning-and-deep-learning-with-python-scikit-learn-and-tensorflow-2">Python Machine Learning</a>
<ul>
<li><a href="https://github.com/rasbt/python-machine-learning-book-3rd-edition">Github Repo</a></li>
</ul></li>
<li><a href="https://course.fast.ai/">Fast AI</a></li>
</ul>
</section>
</section>
<section id="books" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="books"><span class="header-section-number">3.5</span> Books</h2>
<ul>
<li><a href="https://sourestdeeds.github.io/pdf/Deep%20Learning%20with%20Python.pdf">Chollet, F. (2021). Deep learning with Python. Simon and Schuster.</a>
<ul>
<li><a href="https://github.com/fchollet/deep-learning-with-python-notebooks">Python Github Repo</a></li>
<li><a href="https://github.com/t-kalinowski/deep-learning-with-R-2nd-edition-code">R Github Repo</a></li>
<li><a href="https://keras3.posit.co/index.html">A Friendly R Intro to Keras</a></li>
<li><a href="https://www.datacamp.com/tutorial/keras-r-deep-learning">Datacamp Course Overview</a></li>
</ul></li>
<li><a href="https://com-cog-book.github.io/com-cog-book/intro.html">Introduction to Neural Network Models of Cognition</a></li>
<li><a href="https://www.deeplearningbook.org/">Deep Learning - Goodfellow, Bengio, Courville</a></li>
<li><em>Book:</em> <a href="https://web.stanford.edu/~jurafsky/slp3/">“Speech and Language Processing” by Dan Jurafsky and James H. Martin</a>
<ul>
<li><em>Course:</em> <a href="https://www.youtube.com/playlist?list=PLoROMvodv4rOSH4v6133s9LFPRHjEmbmJ">Stanford CS224n - Natural Language Processing with Deep Learning - YouTube Lectures</a></li>
</ul></li>
<li><a href="https://jalammar.github.io/illustrated-transformer/">Hands-on Large Language Models</a></li>
<li><a href="https://www.manning.com/books/grokking-deep-learning">Grokking Deep Learning</a>
<ul>
<li><a href="https://github.com/iamtrask/Grokking-Deep-Learning">Github Repo</a></li>
</ul></li>
<li><a href="https://github.com/yanshengjia/ml-road/tree/master">An interesting collection of free books</a></li>
</ul>
</section>
</section>
<section id="learn-python" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Learn Python</h1>
<ul>
<li><a href="https://automatetheboringstuff.com/">Automate the Boring Stuff with Python</a>
<ul>
<li><a href="https://inventwithpython.com/beyond/">Beyond the Basic Stuff with Python</a> - Some great explanations</li>
</ul></li>
<li><a href="https://laub.au/DeepLearningForActuaries/">UNSW: Artificial Intelligence and Deep Learning Models for Actuarial Applications</a></li>
<li><a href="https://numpy.org/doc/stable/user/absolute_beginners.html">Numpy</a></li>
<li><a href="https://actuariesinstitute.github.io/cookbook/docs/index.html">IFoA: Actuaries Analytical Cookbook</a></li>
</ul>
<section id="how-python-differs-from-r" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="how-python-differs-from-r">How Python differs from R</h2>
<ul>
<li>Purpose
<ul>
<li>R: Designed for statisticians by statisticians.</li>
<li>Python: General-purpose language (web dev, automation, AI, etc.) with growing data science capabilities.</li>
</ul></li>
<li>Indexing starts at 0, not 1</li>
<li>There are methods (functions) associated with data types. Each data type has its own set of methods.</li>
<li>Python using indentation rules for blocks of code! (How old fashion… Like cobol.) (The Python standard is 4 spaces.)</li>
<li>You can use “1_000” for “1000”, the underscore improves readability….</li>
</ul>
</section>
<section id="sandbox" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sandbox">Sandbox</h2>
<p><strong>Note</strong>: I am experimenting with Quarto, It enables you to weave together content and executable code into a finished document. To learn more about Quarto see <a href="https://quarto.org" class="uri">https://quarto.org</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>spam <span class="op">=</span> [[<span class="st">'cat'</span>, <span class="st">'bat'</span>], [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>]]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">enumerate</span>(spam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&lt;enumerate object at 0x0000016CF67097C0&gt;</p>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(spam))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>2</p>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(spam[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>[10, 20, 30, 40, 50]</p>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>